<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />        
        <style>
            body{
                margin:0px;
                border:0px;
                gap:6rem;
                font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            }
            #topbar{
                display: flex;
                flex-direction: row;
                align-items:flex-end;
                justify-content: space-between;
            }
            #lefttop{
                display:flex;
                flex-direction:row;
                align-items:flex-end; 
            }
            #pre1, #span1{
                font-size: large;
                font-weight:bold;
            }
            #sidebar{
                color:rgb(52, 47, 47);
                background-color: white;
                display:flex;;
                flex-direction:column;
                height:450px;
                width:250px;
                border-radius:5px;
                box-shadow: 5px 5px 20px;
            }
            .divT{
                display:flex;
                flex-direction: row;
                width:98vw;
                height:max-content;
                flex-wrap: wrap;
                gap:5rem;
            }
            a{
                text-decoration: none;
                color:rgb(52, 47, 47);
            }
            #span1{
                cursor: pointer;
            }
           #bone,#btwo,#btre,#bfour,#bfive{
                margin-top:10px;
                height:100px;
                width:210px;
                display: flex;
                flex-direction: column;
                border: 1px black;
                border-radius: 10px;
                text-align: center;
                justify-content: center;
            }
            #content{                
                display:flex;
                gap:3rem;
                flex-wrap: wrap;
                width:750px;
                height:200px;
            }
            #boxText{
                color:white;
                font-size: larger;
            }
            #cpre{
                line-height: 1.5px;
            }
            #contact{
            float:bottom;
            }
        /* styles.css */
        #open{
          display: inline-block;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            margin: 5px;
            text-align: center;
            background-color: #3498db;
            color:white;
        }
        #process{
            display: inline-block;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            margin: 5px;
            text-align: center;
            background-color:#e74c3c;
            color:white;
        }
        #middle{
            display: flex;
            flex-direction: row;
            width:auto;
            height:auto;
            gap:2rem; 
        }
                    /* Section One*/

th { background: #c5c5c5;}
table {
        border-collapse: collapse;
        border: 1px solid #cdcdcd;
        font: medium 12px arial; 
        width: 100%;
}
td, th { border: 1px solid #cdcdcd; padding: 5px;}
tr:nth-child(odd) {
  background-color: #f3f3f3c2;
}


/* Section two*/

@media only screen and (max-width: 760px),
(min-device-width: 768px) and (max-device-width: 1024px)  {
        /* Section three*/
                table, thead, tbody, th, td, tr { 
                        display: block; 
                }
                /* Section four*/
                thead tr { 
                        position: absolute;
                        top: -9999px;
                        left: -9999px;
                }
                
                tr { border-bottom: 1px solid #ccc; }
/* Section five*/
                td { 
                     border: none;
                     border-bottom: 1px solid #eee; 
                     position: relative;
                     padding-left: 50%; 
                }
                td:before { 
                        position: absolute;
                        top: 3px;
                        left: 6px;
                        width: 45%; 
                        padding-right: 10px; 
                        white-space: nowrap;
                        font-weight: bold;
                }
                tr:nth-child(odd) {
  background-color: #f3f3f3c2;
}
                /* Section six*/

                td:nth-of-type(1):before { content: "S.No"; }
                td:nth-of-type(2):before { content: "CreationTime"; }
                td:nth-of-type(3):before { content: "InstituionName"; }
                td:nth-of-type(4):before { content: "Area"; }
                td:nth-of-type(5):before { content: "Complaint"; }
                td:nth-of-type(6):before { content: "Explanation"; }
                td:nth-of-type(7):before { content: "Status"; }
                td:nth-of-type(8):before{ content:"Change Status";}
}

/* Section seven*/
        @media only screen
        and (min-device-width : 320px)
        and (max-device-width : 480px) {
                body { 
                        padding: 0; 
                        margin: 0; 
                        width: 320px; }
                }
/* Section eight*/
        @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
                body { 
                        width: 495px; 
                }
        }
        
        </style>
    </head>
    <body>
        <div class="main">
        <div id="topbar">
            <img src="https://www.vishnu.edu.in/upload_news/newlogo.bmp" width="60px" height="60px">
            <div id="lefttop">
            <pre id="pre1"><%= adminName %></pre>&nbsp;&nbsp;&nbsp;
            <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png" width="60px" height="60px">
            </div>
            </div>
            <br>
            <div class="divT">
                <div id="middle">
        <div style="margin-left:5px; margin-top: 8px;" id="sidebar">
           <p>&nbsp;&nbsp;<i class="fa fa-dashboard" style="font-size:20px"></i>&nbsp; &nbsp;<span id="span1"><a href="/admin/dashboard">Dashboard</a></span></p>
            <br>
            <hr style="width:240px; float:left;margin-top:-15px;">
            <p>&nbsp;&nbsp;<i class="fa-solid fa-pen-to-square" style="font-size:20px"></i>&nbsp;&nbsp;<span id="span1"><a href="/adminComplaints">View complaints</a></span></p>
            <br>
            <hr style="width:240px; float:left;margin-top:-15px;">
            <p>&nbsp;&nbsp;<i class="fa fa-history" aria-hidden="true" style="font-size:20px"></i>&nbsp;&nbsp;<span id="span1"><a href="/admin/completed-complaints">Cleared Complaints</a></span></p>
            <br>
            <hr style="width:240px; float:left;margin-top:-15px;">
            <p>&nbsp;&nbsp;<i class="fa fa-phone" aria-hidden="true" style="font-size:20px"></i>&nbsp;&nbsp;<span id="span1"><a href="#contact">Contact Us</a></span></p>
            <br>
            <hr style="width:240px; float:left;margin-top:-15px;">
            <p>&nbsp;&nbsp;<i class="fa fa-sign-out" aria-hidden="true" style="font-size:20px"></i>&nbsp;&nbsp;<span id="span1"><a href="/admin/logout">Logout</a></span></p>
            <br>
            <hr style="width:240px; float:left;margin-top:-15px;">
            
        </div>
        <div>
            <table id="responsive-table" border="2">
                <thead>
                    <tr>
                        <th>Serial number</th>
                        <th>CreationTime</th>
                        <th>Username</th>
                        <th>College Name</th>
                        <th>Area</th>
                      <th>Complaint</th>
                      <th>Explanation</th>
                      <th>Status</th>
                      <th colspan="2">Change Status</th>       
                    </tr>
                </thead>
                <tbody>
                    <% let serialNumber = 1; %>
                    <% for (const complaint of complaints) { %>
                        <tr>
                            <td><%= serialNumber %></td>
                            <td><%= complaint.creationTime %></td>
                            <td><%= complaint.username %></td>
                            <td><%=complaint.INtName %></td>
                            <td><%=complaint.area %></td>
                            <td width="50px" height="30px"><%=complaint.complaint %></td>
                            <td width="50px" height="30px"><%=complaint.explain %></td>
                            <td><span id="<%= complaint.status %>"><%= complaint.status %></span></td>
                            <!-- Other table data -->
                          <!-- <td>
                      <button onclick="updateStatus('<%= complaint.id %>', 'In progress')">In progress</button>
                      <button onclick="updateStatus('<%= complaint.id %>','completed')">Completed</button>
                            </td> -->
                          <td>
                                <!-- "Open" Button -->
                                <form action="/admin/update-status/<%= complaint.id %>?status=process" method="POST">
                                    <button type="submit"<% if (complaint.status === 'process') { %>disabled<% } %>>process</button>
                                </form>
                            </td>
                            <td>
                                <!-- "Completed" Button -->
                                <form action="/admin/update-status/<%= complaint.id %>?status=completed" method="POST">
                                    <button type="submit">Completed</button>
                                </form>
                            </td>
                        </tr>
                        <% serialNumber++; %>
                    <% } %>
                    
                </tbody>
            </table>
    </div>
</div>
</div>
        <center>
        <div id="contact">
            <h5>Contact address</h5>
            <pre id="cpre">email us at: vcomplaints@vishnu.edu.in</pre>
            <pre id="cpre">visit us at: <i>student affairs Office, Block-A, VITB</i></pre>            
        </div>
    </center>
    
   
    </body>
</html>